(function(e,t,n,r,i){t.each(["document","window"],function(t){window["$"+t]=e(window[t])}),n.registerHelpers(),t.isPlainObject=function(e){return t.isObject(e)&&!t.isFunction(e)&&!t.isArray()},t.string=r,window.app=window.Application=new i.Application,t.each(["Core","Util"],function(e){Application.module(e)})})(jQuery,_,Swag,s,Marionette),function(e){e.setup=function(t){function r(t,r){var s={h:$window.height(),w:$window.width()};if(!i(s))return;e.screenSize=s,e.config.fullScreen&&(n.height(s.h),n.width(s.w)),r||e.trigger("app:resized",s)}function i(e){return e.h>0&&e.w>0}function s(){var t=$window.scrollTop();e.trigger("app:scroll",t)}function u(t){t=_.compact(String(t).split("/"));if(t.length<=0)throw new Error("DEV::Application::navigate() Navigation path error");var n=t.shift();if(!n)throw new Error("DEV::Application::navigate() Empty context name...");var r=e.get(n,"Context");if(!r)throw new Error("DEV::Application::navigate() You must have the required context "+n+" defined...");if(!e.currentContext||e.currentContext.name!==n){var i=new r,s;i.guard&&(s=i.guard());if(s){e.trigger("app:context-guard-error",s,i.name);return}if(i.onBeforeNavigateTo&&!i.onBeforeNavigateTo()){e.trigger("app:navigation-aborted",i.name);return}e.currentContext&&e.currentContext.trigger("context:navigate-away"),e.Util.addMetaEvent(i,"context");var o=e.config.navRegion||e.config.contextRegion,u=e.mainView.getRegion(o)||e.getRegion(o);if(!u)throw new Error("DEV::Application::navigate() You don't have region '"+o+"' defined");i.once("show",function(){e.currentContext=i,e.trigger("app:context-switched",e.currentContext.name)}),u.show(i)}e.currentContext.trigger("context:navigate-chain",t)}if(e.config){_.extend(e.config,t);return}e.config=_.extend({template:"",contextRegion:"app",defaultContext:"Default",fullScreen:!1,rapidEventDelay:200,baseAjaxURI:"",viewTemplates:"static/template",viewSrcs:undefined,i18nResources:"static/resource",i18nTransFile:"i18n.json",i18nLocale:"",timeout:3e5},t),e.Util.addMetaEvent(e,"app");var n=$("body");$window.on("resize",_.debounce(r,e.config.rapidEventDelay)),e._ensureScreenSize=function(t){r(),e.screenSize?t():_.delay(e._ensureScreenSize,e.config.rapidEventDelay/4,t)},$window.on("scroll",_.throttle(s,e.config.rapidEventDelay)),e.config.fullScreen&&n.css({overflow:"hidden",margin:0,padding:0});var o=e.uri(window.location.toString()).search(!0).theme||e.config.theme;return o&&console.warn("DEV::Application::theme is now deprecated, please use theme css directly in <head>"),e.config.viewTemplates&&e.inject.tpl("all.json"),I18N.configure({locale:e.config.i18nLocale,resourcePath:e.config.i18nResources,translationFile:e.config.i18nTransFile}),e.onNavigate=function(t,n){if(!e.available()){e.trigger("app:blocked",t);return}var r="";_.isString(t)?r=t:r=_.string.rtrim([t.context||e.currentContext.name,t.module||t.subpath].join("/"),"/"),n||e.hybridEvent?u(r):window.location.hash="navigate/"+r},e.onContextGuardError=function(e,t){console.error("DEV:Context-Guard-Error:",t,e)},e.on("initialize:after",function(t){var n=Backbone.Marionette.AppRouter.extend({appRoutes:{"navigate/*path":"navigateTo"},controller:{navigateTo:function(t){e.navigate(t||e.config.defaultContext,!0)}}});e.router=new n,Backbone.history&&Backbone.history.start(),window.location.hash||(e.get(e.config.defaultContext,"Context")?e.navigate(e.config.defaultContext):console.warn("DEV::Application:: You might want to define a Default context using app.context('Context Name', {...})"))}),e},e.run=function(t){function n(){Modernizr.mobile&&FastClick.attach(document.body),e.addRegions({app:'[region="app"]'}),e.trigger("app:before-mainview-ready"),e.mainView=e.mainView||e.view({template:e.config.template},!0),e.getRegion("app").show(e.mainView),e.trigger("app:mainview-ready"),e._ensureScreenSize(function(){e.start()})}return t=t===!0?"deviceready":t,t?(e.hybridEvent=t,window.onerror=function(t,n,r){e.trigger("app:error",{errorMsg:t,target:n,lineNum:r})},e.onError=function(e,t,n){console.error(e,t,n)},document.addEventListener("touchmove",function(e){e.target.classList.contains("scrollable")||e.preventDefault()},!1),document.addEventListener(t,function(){$document.ready(n)},!1)):$document.ready(n),e}}(Application),function(e){e.create=function(t,n){console.warn("DEV::Application::create() method is deprecated, use methods listed in ",e._apis," for alternatives")},_.extend(e,{view:function(t,n){if(_.isString(t)){if(_.isBoolean(n)&&n)return e.Core.View.create(t);if(_.isPlainObject(n))return e.Core.View.register(t,n)}if(_.isPlainObject(t)){var r=n;n=t;var i=n.name?e.Core.View.register(n):Backbone.Marionette[n.type||"Layout"].extend(n);return _.isBoolean(r)&&r?new i:i}return e.Core.View.get(t)},context:function(t,n){if(!n){if(_.isString(t)||!t)return e.Core.Context.get(t);n=t}else _.extend(n,{name:t});return e.Core.Context.register(n)},widget:function(t,n){return n?_.isFunction(n)?e.Core.Widget.register(t,n):e.Core.Widget.create(t,n):e.Core.Widget.get(t)},editor:function(t,n){return n?_.isFunction(n)?e.Core.Editor.register(t,n):e.Core.Editor.create(t,n):e.Core.Editor.get(t)},regional:function(t,n){return n=n||{},_.isString(t)?_.extend(n,{name:t}):_.extend(n,t),console.warn("DEV::Application::regional() method is deprecated, use .view() instead for",n.name),e.view(n,!n.name)},has:function(t,n){return n?e.Core[n]&&e.Core[n].has(t):(_.each(["Context","View","Widget","Editor"],function(r){!n&&e.Core[r].has(t)&&(n=r)}),n)},get:function(t,n,r){if(!t)return{Context:e.Core.Context.get(),View:e.Core.View.get(),Widget:e.Core.Widget.get(),Editor:e.Core.Editor.get()};n=n||"View";var i=e.Core[n]&&e.Core[n].get(t);if(i)return i;if(r)throw new Error("Application::get() Double check your view name defined in "+e.nameToPath(t)+" for "+e.pathToName(t));return e.config&&e.config.viewSrcs&&$.ajax({url:_.compact([e.config.viewSrcs,n.toLowerCase(),e.nameToPath(t)]).join("/")+".js",dataType:"script",async:!1}).done(function(){e.debug("View injected",t,"from",e.viewSrcs),i=!0}).fail(function(e,n,r){throw new Error("DEV::Application::get() can NOT load View definition for",t,"[",r,"]")}),i===!0?this.get(t,n,!0):i},coop:function(t,n){return e.trigger("app:coop",t,n),e.trigger("app:coop-"+t,n),e},pathToName:function(e){if(!_.isString(e))throw new Error("DEV::Application::pathToName() You must pass in a valid path string.");return _.contains(e,".")?e:e.split("/").map(_.string.humanize).map(_.string.classify).join(".")},nameToPath:function(e){if(!_.isString(e))throw new Error("DEV::Application::nameToPath() You must pass in a Reusable view name.");return _.contains(e,"/")?e:e.split(".").map(_.string.humanize).map(_.string.slugify).join("/")},navigate:function(t,n){return e.trigger("app:navigate",t||e.config.defaultContext,n)},lock:function(t){return e.Core.Lock.lock(t)},unlock:function(t){return e.Core.Lock.unlock(t)},available:function(t){return e.Core.Lock.available(t)},remote:function(t,n,r){return t=t||{},t.payload||n?(n=t.payload||n,e.Core.Remote.change(t,_.extend({payload:n},r))):e.Core.Remote.get(t,r)},download:function(t){return e.Util.download(t)},_websockets:{},ws:function(t){if(!Modernizr.websockets)throw new Error("DEV::Application::ws() Websocket is not supported by your browser!");t=t||"/ws";var n=$.Deferred();return e._websockets[t]?n.resolve(e._websockets[t]):(e._websockets[t]=new WebSocket("ws://"+location.host+t),e._websockets[t].json=function(n){e._websockets[t].send(JSON.stringify(n))},e._websockets[t].channel=function(n){return{payload:function(r){e._websockets[t].json({channel:n,payload:r})}}},e._websockets[t].onclose=function(){e._websockets[t]=undefined},e._websockets[t].onopen=function(){return n.resolve(e._websockets[t])},e._websockets[t].onmessage=function(n){var r=JSON.parse(n.data);e.debug("websocket",t,"channel",r.channel,"payload",r.payload)}),n.promise()},inject:{js:function(){return e.Util.inject.apply(null,arguments)},tpl:function(){return e.Util.Tpl.remote.load.apply(e.Util.Tpl.remote,arguments)},css:function(){return loadCSS.apply(null,arguments)}},dispatcher:function(e){return _.isPlainObject(e)?_.extend(e,Backbone.Events):_.clone(Backbone.Events)},model:function(e){return new Backbone.DeepModel(e)},collection:function(e){return new Backbone.Collection(e)},extract:function(e,t){return selectn(e,t)},cookie:Cookies,store:store.enabled&&store,validator:validator,moment:moment,uri:URI,param:function(t,n){var r=URI.parseQuery(e.uri(window.location.href).search())||{};return t?r[t]||n:r},reload:function(){window.location.reload()},debug:function(){var t=console.debug||console.log;e.param("debug")==="true"&&t.apply(console,arguments)}}),e.editor.validator=e.editor.rule=function(t,n){if(!_.isString(t))throw new Error("DEV::Validator:: You must specify a validator/rule name to use.");return e.Core.Editor.addRule(t,n)},e.page=e.context,e.area=e.regional,e._apis=["model","collection","context - @alias:page","regional - @alias:area","view","widget","editor","editor.validator - @alias:editor.rule","remote","lock","unlock","available","download","create - @deprecated"],e.ADE="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"}(Application),function(e){e.Util.addMetaEvent=function(e,t,n){n||(n=e),e.listenTo(e,"all",function(r){var i=String(r).split(":");if(i.length!==2||i[0]!==t)return;var s=_.string.camelize("on-"+i[1]);n[s]&&n[s].apply(e,_.toArray(arguments).slice(1))})}}(Application),function(e){function t(t){var n=$("#hidden-download-iframe");n.length>0||($("body").append('<iframe id="hidden-download-iframe" style="display:none"></iframe>'),n=$("#hidden-download-iframe")),_.isString(t)&&(t={url:t}),n.attr("src",e.uri(t.url||"/").addQuery(_.omit(t,"url")).toString())}e.Util.download=t}(Application),function(e){var t=/[\.\/]/,n={normalizeId:function(e){return String(e).split(t).join("-")},cache:Backbone.Marionette.TemplateCache,build:function(e,t){arguments.length===1&&(t=e,e=null);var n=_.isArray(t)?t.join(""):t;if(e){var r=this.normalizeId(e),i=$('head > script[id="'+r+'"]');i.length>0?(i.html(n),this.cache.clear("#"+e),console.warn("DEV::Overriden::Template::",e)):$("head").append(['<script type="text/tpl" id="',r,'">',n,"</script>"].join(""))}return n},remote:{map:{},load:function(t,r){var i=this,s=(r||e.config.viewTemplates)+"/"+t;if(!_.string.endsWith(t,".json")){var o="";return $.ajax({url:s,dataType:"html",async:!1}).done(function(e){i.map[t]&&(n.cache.clear("@"+t),console.warn("DEV::Overriden::Template::",t)),o=i.map[t]=e}).fail(function(){throw new Error("DEV::Util.Tpl::load() Can not load template..."+s+", re-check your app.config.viewTemplates setting")}),o}$.ajax({url:s,dataType:"json",async:!1}).done(function(e){_.each(e,function(e,t){i.map[t]&&(n.cache.clear("@"+t),console.warn("DEV::Overriden::Template::",t)),i.map[t]=e})})},get:function(e){return e?this.map[e]:_.keys(this.map)}}};e.Util.Tpl=n}(Application),function(e){e.Util.inject=function(t){t=t||"patch.json",_.string.endsWith(t,".js")?$.getScript(t):$.getJSON(t).done(function(t){var n="";_.isArray(t)||(n=t.base,t=t.list),_.each(t,function(t){e.Util.inject((_.string.endsWith(n,"/")?n:n?n+"/":"")+t)})})}}(Application),function(e,t,n){function i(n,r){if(!n)throw new Error("DEV::Core.Remote::options empty, you need to pass in at least a url string");t.isString(n)&&(n=t.extend(r||{},{url:n})),t.extend(n,r||{},{type:undefined,data:undefined,processData:!1,contentType:"application/json; charset=UTF-8",dataType:"json",timeout:e.config.timeout});if(n.entity||n._entity){var i=n.entity||n._entity;n.url=i}n.payload&&n.payload._id&&(n._id=n.payload._id);if(n._id||n._method){var s=e.uri(n.url);n.url=s.path(t.compact([s.path(),n._id,n._method]).join("/")).toString()}return n.params=t.extend(n.params||{},n.querys),n.params&&(n.url=e.uri(n.url).search(n.params).toString()),e.trigger("app:ajax",n),n}var r=e.module("Core.Remote");t.extend(r,{get:function(t,r){return t=i(t,r),t.type="GET",e.trigger("app:remote-pre-get",t),n.ajax(t)},change:function(r,s){r=i(r,s);if(!r.payload)throw new Error("DEV::Core.Remote::payload empty, please use GET");return r.payload._id&&t.size(r.payload)===1?r.type="DELETE":(t.isObject(r.payload)||(r.payload={payload:r.payload}),r.payload._id?r.type="PUT":r.type="POST"),r.type!=="DELETE"&&(r.data=JSON.stringify(r.payload)),e.trigger("app:remote-pre-change",r),n.ajax(r)}}),$document.ajaxSend(function(t,n,r){e.trigger("app:ajax-start",t,n,r)}),$document.ajaxComplete(function(t,n,r){e.trigger("app:ajax-stop",t,n,r)}),$document.ajaxSuccess(function(t,n,r,i){e.trigger("app:ajax-success",t,n,r,i)}),$document.ajaxError(function(t,n,r,i){e.trigger("app:ajax-error",t,n,r,i)}),$document.ajaxStart(function(){e.trigger("app:ajax-active")}),$document.ajaxStop(function(){e.trigger("app:ajax-inactive")}),e.ajaxFailed=function(e,t,n){throw new Error("DEV::Ajax::"+n+" "+t.url)},e.onAjax=function(n){e.config.baseAjaxURI&&(n.url=n.url.match(/^[\/\.]/)?n.url:[e.config.baseAjaxURI,n.url].join("/"));var r=n.xdomain;r&&(n.url=(r.protocol||"http")+"://"+(r.host||"localhost")+(r.port&&":"+r.port||"")+(/^\//.test(n.url)?n.url:"/"+n.url),n.crossDomain=!0,n.xhrFields=t.extend(n.xhrFields||{},{withCredentials:!0}),n.headers=t.extend(n.headers||{},r.headers)),Modernizr.ie&&(n.cache=!1)}}(Application,_,jQuery),function(e){var t=e.module("Core.Lock"),n={},r=!1;_.extend(t,{create:function(e,t){if(!_.isString(e)||!e)throw new Error("DEV::Core.Lock::create() You must give this lock a name/topic ...");return n[e]?!1:(t=_.isNumber(t)?t||1:1,n[e]={current:t,allowance:t},!0)},get:function(e){return!e||e==="*"?{global:r,locks:n}:n[e]},lock:function(e){return r?!1:!e||e==="*"?r?!1:(r=!0,!0):_.isUndefined(n[e])?(this.create(e,1),this.lock(e)):n[e].current>0?(n[e].current--,!0):!1},unlock:function(e){!e||e==="*"?r&&(r=!1):_.isUndefined(n[e])||n[e].current<n[e].allowance&&n[e].current++},available:function(e){if(r)return!1;if(!e||e==="*")return r===!1;var t=this.get(e);return t?t.current>0:!0}})}(Application),function(e,t,n){function r(r){r=e.string.classify(r);var i=t.module("Core."+r);return e.extend(i,{map:{},has:function(n){if(!e.isString(n)||!n)throw new Error("DEV::Reusable::has() You must specify the name of the "+r+" to look for.");return n=t.pathToName(n),this.map[n]?n:undefined},register:function(i,s){var o;e.isPlainObject(i)?(o=i,i=o.name,e.extend(o,{className:r.toLowerCase()+" "+e.string.slugify(r+"-"+o.name)+" "+(o.className||""),category:r}),s=function(){return n[o.type||"Layout"].extend(o)}):e.isPlainObject(s)&&(o=e.extend({name:i},s),s=function(){return n[o.type||"Layout"].extend(o)});if(!e.isString(i)||!i)throw new Error("DEV::Reusable::register() You must specify a "+r+" name to register.");if(!e.isFunction(s))throw new Error("DEV::Reusable::register() You must specify a "+r+" factory function to register "+i+" !");return this.has(i)&&console.warn("DEV::Overriden::Reusable "+r+"."+i),this.map[i]=s(),this.map[i].prototype.name=i,t.trigger("app:reusable-registered",this.map[i],r),t.coop("reusable-registered",this.map[i],r),this.map[i]},create:function(t,n){if(!e.isString(t)||!t)throw new Error("DEV::Reusable::create() You must specify the name of the "+r+" to create.");var i=this.get(t);if(i)return new i(n||{});throw new Error("DEV::Reusable::create() Required definition ["+t+"] in "+r+" not found...")},get:function(t){if(!t)return e.keys(this.map);t=this.has(t);if(t)return this.map[t]},alter:function(e,t){var n=this.get(e);if(n)return n=n.extend(t),n;throw new Error("DEV::Reusable::alter() Required definition ["+e+"] in "+r+" not found...")}}),i}r("Context"),r("Regional"),t.Core.View=t.Core.Regional,r("Widget"),r("Editor")}(_,Application,Marionette),function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){window.Backbone=window.Backbone||{},window.Backbone.DeepModel=e(".")},{".":20}],2:[function(e,t,n){function p(e){return e&&typeof e=="object"||!1}function v(e,t){return s(e,t,c)}function m(e,t,n,r,s){if(!b(e))return e;var o=y(t.length)&&(a(t)||l(t));return(o?i:v)(t,function(t,i,u){if(p(t))return r||(r=[]),s||(s=[]),g(e,u,i,m,n,r,s);var a=e[i],f=n?n(a,t,i,e,u):undefined,l=typeof f=="undefined";l&&(f=t),(o||typeof f!="undefined")&&(l||(f===f?f!==a:a===a))&&(e[i]=f)}),e}function g(e,t,n,i,s,o,c){var p=o.length,d=t[n];while(p--)if(o[p]==d){e[n]=c[p];return}var v=e[n],m=s?s(v,d,n,e,t):undefined,g=typeof m=="undefined";g&&(m=d,y(d.length)&&(a(d)||l(d))?m=a(v)?v:v?r(v):[]:f(d)||u(d)?m=u(v)?h(v):f(v)?v:{}:g=!1),o.push(d),c.push(m);if(g)e[n]=i(m,d,s,o,c);else if(m===m?m!==v:v===v)e[n]=m}function y(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=d}function b(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}var r=e("lodash._arraycopy"),i=e("lodash._arrayeach"),s=e("lodash._basefor"),o=e("lodash._createassigner"),u=e("lodash.isarguments"),a=e("lodash.isarray"),f=e("lodash.isplainobject"),l=e("lodash.istypedarray"),c=e("lodash.keys"),h=e("lodash.toplainobject"),d=Math.pow(2,53)-1,w=o(m);t.exports=w},{"lodash._arraycopy":3,"lodash._arrayeach":4,"lodash._basefor":5,"lodash._createassigner":6,"lodash.isarguments":9,"lodash.isarray":10,"lodash.isplainobject":11,"lodash.istypedarray":14,"lodash.keys":15,"lodash.toplainobject":17}],3:[function(e,t,n){function r(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}t.exports=r},{}],4:[function(e,t,n){function r(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e)===!1)break;return e}t.exports=r},{}],5:[function(e,t,n){function r(e,t,n){var r=-1,s=i(e),o=n(e),u=o.length;while(++r<u){var a=o[r];if(t(s[a],a,s)===!1)break}return e}function i(e){return s(e)?e:Object(e)}function s(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}t.exports=r},{}],6:[function(e,t,n){function s(e){return function(){var t=arguments,n=t.length,s=t[0];if(n<2||s==null)return s;var o=t[n-2],u=t[n-1],a=t[3];n>3&&typeof o=="function"?(o=r(o,u,5),n-=2):(o=n>2&&typeof u=="function"?u:null,n-=o?1:0),a&&i(t[1],t[2],a)&&(o=n==3?null:o,n=2);var f=0;while(++f<n){var l=t[f];l&&e(s,l,o)}return s}}var r=e("lodash._bindcallback"),i=e("lodash._isiterateecall");t.exports=s},{"lodash._bindcallback":7,"lodash._isiterateecall":8}],7:[function(e,t,n){function r(e,t,n){if(typeof e!="function")return i;if(typeof t=="undefined")return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=r},{}],8:[function(e,t,n){function i(e,t){return e=+e,t=t==null?r:t,e>-1&&e%1==0&&e<t}function s(e,t,n){if(!u(n))return!1;var r=typeof t;if(r=="number")var s=n.length,a=o(s)&&i(t,s);else a=r=="string"&&t in n;if(a){var f=n[t];return e===e?e===f:f!==f}return!1}function o(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}function u(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}var r=Math.pow(2,53)-1;t.exports=s},{}],9:[function(e,t,n){function i(e){return e&&typeof e=="object"||!1}function a(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=u}function f(e){var t=i(e)?e.length:undefined;return a(t)&&o.call(e)==r||!1}var r="[object Arguments]",s=Object.prototype,o=s.toString,u=Math.pow(2,53)-1;t.exports=f},{}],10:[function(e,t,n){function a(e){return typeof e=="string"?e:e==null?"":e+""}function f(e){return e&&typeof e=="object"||!1}function m(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=v}function y(e){return e==null?!1:h.call(e)==i?p.test(c.call(e)):f(e)&&s.test(e)||!1}function b(e){return e=a(e),e&&u.test(e)?e.replace(o,"\\$&"):e}var r="[object Array]",i="[object Function]",s=/^\[object .+?Constructor\]$/,o=/[.*+?^${}()|[\]\/\\]/g,u=RegExp(o.source),l=Object.prototype,c=Function.prototype.toString,h=l.toString,p=RegExp("^"+b(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d=y(d=Array.isArray)&&d,v=Math.pow(2,53)-1,g=d||function(e){return f(e)&&m(e.length)&&h.call(e)==r||!1};t.exports=g},{}],11:[function(e,t,n){function u(e){return e&&typeof e=="object"||!1}function h(e,t){return r(e,t,s)}function p(e){var t;if(!u(e)||l.call(e)!=o||!f.call(e,"constructor")&&(t=e.constructor,typeof t=="function"&&!(t instanceof t)))return!1;var n;return h(e,function(e,t){n=t}),typeof n=="undefined"||f.call(e,n)}var r=e("lodash._basefor"),i=e("lodash.isnative"),s=e("lodash.keysin"),o="[object Object]",a=Object.prototype,f=a.hasOwnProperty,l=a.toString,c=i(c=Object.getPrototypeOf)&&c,d=c?function(e){if(!e||l.call(e)!=o)return!1;var t=e.valueOf,n=i(t)&&(n=c(t))&&c(n);return n?e==n||c(e)==n:p(e)}:p;t.exports=d},{"lodash._basefor":5,"lodash.isnative":12,"lodash.keysin":13}],12:[function(e,t,n){function u(e){return typeof e=="string"?e:e==null?"":e+""}function a(e){return e&&typeof e=="object"||!1}function p(e){return e==null?!1:c.call(e)==r?h.test(l.call(e)):a(e)&&i.test(e)||!1}function d(e){return e=u(e),e&&o.test(e)?e.replace(s,"\\$&"):e}var r="[object Function]",i=/^\[object .+?Constructor\]$/,s=/[.*+?^${}()|[\]\/\\]/g,o=RegExp(s.source),f=Object.prototype,l=Function.prototype.toString,c=f.toString,h=RegExp("^"+d(c).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=p},{}],13:[function(e,t,n){function l(e,t){return e=+e,t=t==null?a:t,e>-1&&e%1==0&&e<t}function c(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=a}function h(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}function p(e){if(e==null)return[];h(e)||(e=Object(e));var t=e.length;t=t&&c(t)&&(i(e)||f.nonEnumArgs&&r(e))&&t||0;var n=e.constructor,s=-1,u=typeof n=="function"&&n.prototype===e,a=Array(t),p=t>0;while(++s<t)a[s]=s+"";for(var d in e)(!p||!l(d,t))&&(d!="constructor"||!u&&!!o.call(e,d))&&a.push(d);return a}var r=e("lodash.isarguments"),i=e("lodash.isarray"),s=Object.prototype,o=s.hasOwnProperty,u=s.propertyIsEnumerable,a=Math.pow(2,53)-1,f={};(function(e){try{f.nonEnumArgs=!u.call(arguments,1)}catch(t){f.nonEnumArgs=!0}})(0,0),t.exports=p},{"lodash.isarguments":9,"lodash.isarray":10}],14:[function(e,t,n){function k(e){return e&&typeof e=="object"||!1}function M(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=O}function _(e){return k(e)&&M(e.length)&&C[A.call(e)]||!1}var r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",u="[object Error]",a="[object Function]",f="[object Map]",l="[object Number]",c="[object Object]",h="[object RegExp]",p="[object Set]",d="[object String]",v="[object WeakMap]",m="[object ArrayBuffer]",g="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",x="[object Uint8ClampedArray]",T="[object Uint16Array]",N="[object Uint32Array]",C={};C[g]=C[y]=C[b]=C[w]=C[E]=C[S]=C[x]=C[T]=C[N]=!0,C[r]=C[i]=C[m]=C[s]=C[o]=C[u]=C[a]=C[f]=C[l]=C[c]=C[h]=C[p]=C[d]=C[v]=!1;var L=Object.prototype,A=L.toString,O=Math.pow(2,53)-1;t.exports=_},{}],15:[function(e,t,n){function h(e,t){return e=+e,t=t==null?l:t,e>-1&&e%1==0&&e<t}function p(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=l}function d(e){var t=g(e),n=t.length,s=n&&e.length,o=s&&p(s)&&(i(e)||c.nonEnumArgs&&r(e)),a=-1,f=[];while(++a<n){var l=t[a];(o&&h(l,s)||u.call(e,l))&&f.push(l)}return f}function v(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}function g(e){if(e==null)return[];v(e)||(e=Object(e));var t=e.length;t=t&&p(t)&&(i(e)||c.nonEnumArgs&&r(e))&&t||0;var n=e.constructor,s=-1,o=typeof n=="function"&&n.prototype===e,a=Array(t),f=t>0;while(++s<t)a[s]=s+"";for(var l in e)(!f||!h(l,t))&&(l!="constructor"||!o&&!!u.call(e,l))&&a.push(l);return a}var r=e("lodash.isarguments"),i=e("lodash.isarray"),s=e("lodash.isnative"),o=Object.prototype,u=o.hasOwnProperty,a=o.propertyIsEnumerable,f=s(f=Object.keys)&&f,l=Math.pow(2,53)-1,c={};(function(e){try{c.nonEnumArgs=!a.call(arguments,1)}catch(t){c.nonEnumArgs=!0}})(0,0);var m=f?function(e){if(e)var t=e.constructor,n=e.length;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&n&&p(n)?d(e):v(e)?f(e):[]}:d;t.exports=m},{"lodash.isarguments":9,"lodash.isarray":10,"lodash.isnative":16}],16:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],17:[function(e,t,n){function s(e){return r(e,i(e))}var r=e("lodash._basecopy"),i=e("lodash.keysin");t.exports=s},{"lodash._basecopy":18,"lodash.keysin":19}],18:[function(e,t,n){function r(e,t,n){n||(n=t,t={});var r=-1,i=n.length;while(++r<i){var s=n[r];t[s]=e[s]}return t}t.exports=r},{}],19:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{dup:13,"lodash.isarguments":9,"lodash.isarray":10}],20:[function(e,t,n){function u(e,t){var n={},i=c.keyPathSeparator;for(var s in e){var o=e[s];if(o&&(o.constructor===Object||!t&&o.constructor===Array)&&!r.isEmpty(o)){var a=u(o,t);for(var f in a){var l=a[f];n[s+i+f]=l}}else n[s]=o}return n}function a(e,t,n){var i=c.keyPathSeparator,s=t?t.split(i):[],o=e;n||n===!1;for(var u=0,a=s.length;u<a;u++){if(n&&!r.has(o,s[u]))return!1;o=o[s[u]],o==null&&u<a-1&&(o={});if(typeof o=="undefined")return n?!0:o}return n?!0:o}function f(e,t,n,i){i=i||{};var s=c.keyPathSeparator,o=t?t.split(s):[],u=e;for(var a=0,f=o.length;a<f&&u!==undefined;a++){var l=o[a];if(a===f-1)i.unset?delete u[l]:u[l]=n;else{if(typeof u[l]=="undefined"||!r.isObject(u[l])){var h=o[a+1];u[l]=/^\d+$/.test(h)?[]:{}}u=u[l]}}}function l(e,t){f(e,t,null,{unset:!0})}try{var r=e("underscore")}catch(i){var r=window._}try{var s=e("backbone")}catch(i){var s=window.Backbone}var o=e("lodash.merge"),c=s.Model.extend({constructor:function(e,t){var n,i=e||{};this.cid=r.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{});if(n=r.result(this,"defaults"))i=o(n,i);this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(e){return o({},this.attributes)},get:function(e){return a(this.attributes,e)},set:function(e,t,n){var i,s,h,p,d,v,m,g;if(e==null)return this;typeof e=="object"?(s=e,n=t||{}):(s={})[e]=t,n||(n={});if(!this._validate(s,n))return!1;h=n.unset,d=n.silent,p=[],v=this._changing,this._changing=!0,v||(this._previousAttributes=o({},this.attributes),this.changed={}),g=this.attributes,m=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]),s=u(s,!0);for(i in s)t=s[i],r.isEqual(a(g,i),t)||p.push(i),r.isEqual(a(m,i),t)?l(this.changed,i):f(this.changed,i,t),h?l(g,i):f(g,i,t);if(!d){p.length&&(this._pending=!0);var y=c.keyPathSeparator,b={};for(var w=0,E=p.length;w<E;w++){var e=p[w];if(!b.hasOwnProperty(e)||!b[e])b[e]=!0,this.trigger("change:"+e,this,a(g,e),n);var S=e.split(y);for(var x=S.length-1;x>0;x--){var T=S.slice(0,x).join(y),N=T+y+"*";if(!b.hasOwnProperty(N)||!b[N])b[N]=!0,this.trigger("change:"+N,this,a(g,T),n);if(!b.hasOwnProperty(T)||!b[T])b[T]=!0,this.trigger("change:"+T,this,a(g,T),n)}}}if(v)return this;if(!d)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},clear:function(e){var t={},n=u(this.attributes);for(var i in n)t[i]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!r.isEmpty(this.changed):a(this.changed,e)!==undefined},changedAttributes:function(e){if(!e)return this.hasChanged()?u(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes;e=u(e),t=u(t);var n,i=!1;for(var s in e){if(r.isEqual(t[s],n=e[s]))continue;(i||(i={}))[s]=n}return i},previous:function(e){return e==null||!this._previousAttributes?null:a(this._previousAttributes,e)},previousAttributes:function(){return o({},this._previousAttributes)}});c.keyPathSeparator=".",t.exports=c},{backbone:undefined,"lodash.merge":2,underscore:undefined}]},{},[1]),function(e){Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(t){if(_.string.startsWith(t,"#"))return $(t).html();if(_.string.startsWith(t,"@")){var n=t.substr(1),r=e.Util.Tpl.remote.get(n);return r?r:e.Util.Tpl.remote.load(n)}return e.Util.Tpl.build(t)},Backbone.Marionette.TemplateCache.prototype.compileTemplate=function(e){return Handlebars.compile(e)}}(Application),function(e){_.extend(Backbone.Marionette.Region.prototype,{show:function(t,n){this.ensureEl();var r=this.currentView;if(r){var i=(_.isPlainObject(r.effect)?r.effect.exit:r.effect?r.effect+"Out":"")||(this.$el.data("effect")?this.$el.data("effect")+"Out":"")||this.$el.data("effectExit");if(i){var s=this;return r.$el.addClass(i).addClass("animated").one(e.ADE,function(){s.close(),s._show(t,n)}),this}this.close()}return this._show(t,n)},_show:function(e,t){return e.render(),Marionette.triggerMethod.call(this,"before:show",e),_.isFunction(e.triggerMethod)?e.triggerMethod("before:show"):Marionette.triggerMethod.call(e,"before:show"),this.open(e),this.currentView=e,Marionette.triggerMethod.call(this,"show",e),_.isFunction(e.triggerMethod)?e.triggerMethod("show"):Marionette.triggerMethod.call(e,"show"),this},open:function(t){var n=(_.isPlainObject(t.effect)?t.effect.enter:t.effect?t.effect+"In":"")||(this.$el.data("effect")?this.$el.data("effect")+"In":"")||this.$el.data("effectEnter");if(n){t.$el.css("opacity",0).addClass(n);function r(){_.defer(function(){t.$el.addClass("animated").one(e.ADE,function(){t.$el.removeClass("animated",n),t.trigger("view:animated")}),_.defer(function(){t.$el.css("opacity",1)})})}t.once("show",function(){r()})}this.$el.empty().append(t.el),this._parentLayout&&(t.parentCt=this._parentLayout,this._parentLayout.category==="Context"?t.parentCtx=this._parentLayout:this._parentLayout.parentCtx&&(t.parentCtx=this._parentLayout.parentCtx)),t.fieldset&&(this._parentLayout._fieldsets=this._parentLayout._fieldsets||{},this._parentLayout._fieldsets[t.fieldset]=t);if(this._contentStyle){var i=this;_.defer(function(){t.trigger("view:resized",{region:i})})}return t.parentRegion=this,this},resize:function(e){e=e||{},this._contentStyle=_.extend({},e,this._contentOverflow),this.$el.css(this._contentStyle);var t=this;return _.defer(function(){t.currentView&&t.currentView.trigger("view:resized",{region:t})}),this}})}(Application),function(e){_.extend(Backbone.Marionette.View.prototype,{isInDOM:function(){return this.$el?$.contains(document.documentElement,this.$el[0]):undefined}}),Backbone.Marionette.View.prototype.constructor=function(t){return t=t||{},(this.type||t.type)&&!this.forceViewType&&console.warn("DEV::View+::type is deprecated, please do not specify "+(this.name?"in "+this.name:"")),this.template=t.template||this.template||" ",this.data=t.data||this.data,this._ui=_.extend({},this.ui,t.ui),this.listenTo(this,"render",function(){var e=this;this.unbindUIElements(),this.ui=this._ui,$(this.el.outerHTML).find("[ui]").each(function(t,n){var r=$(this).attr("ui");e.ui[r]='[ui="'+r+'"]'}),this.bindUIElements()}),e.Util.addMetaEvent(this,"view"),this.coop&&(this._postman={},_.each(this.coop,function(t){var n=this;this._postman[t]=function(r){n.trigger("view:"+t,r),n.isInDOM()===!1&&e.off("app:coop-"+t,n._postman[t])},e.on("app:coop-"+t,this._postman[t])},this),this.listenTo(this,"close",function(){_.each(this._postman,function(t,n){e.off("app:coop-"+n,t)})})),this.actions&&this.enableActionTags&&this.enableActionTags(this.actions._bubble),this.editors&&this.activateEditors&&this.listenTo(this,"render",function(){this.activateEditors(this.editors)}),this.svg&&this.enableSVG&&this.listenTo(this,"render",this.enableSVG),this.tooltips&&this.enableTooltips&&this.enableTooltips(this.tooltips),this.overlay&&this.enableOverlay&&this.enableOverlay(),I18N.locale&&this.listenTo(this,"render",function(){this.$el.i18n({search:!0})}),this.listenToOnce(this,"show",function(){this.data=this.data||this.parentCt&&this.useParentData&&this.parentCt.get(this.useParentData),this.data&&this.set(this.data)}),Backbone.Marionette.View.apply(this,arguments)}}(Application),function(e){_.extend(Backbone.Marionette.ItemView.prototype,{enableActionTags:function(t,n){_.isBoolean(t)&&(n=t,t=""),n=n||!1,this.events=this.events||{},_.extend(this.events,{"click [action]":"_doAction"}),this.actions=this.actions||{},t=t||this.name||"UNKNOWN.View",this._doAction=function(r){var i=$(r.currentTarget),s=i.attr("action")||"UNKNOWN",o=i.attr("lock"),u=i.attr("unlock");u&&e.unlock(u);if(o&&!e.lock(o)){r.stopPropagation(),r.preventDefault(),e.trigger("app:blocked",s,o);return}if(i.hasClass("disabled")||i.parent().hasClass("disabled")){r.stopPropagation(),r.preventDefault();return}var a=String(s).split(":");if(a.length>=2)return a.shift(),r.stopPropagation(),this.trigger(a.join(":"));var f=this.actions[s];if(!f){if(n)return;throw r.stopPropagation(),new Error("DEV::"+(t||"UI Component")+"::enableActionTags() You have not yet implemented this action - ["+s+"]")}r.stopPropagation(),f.apply(this,[i,r,o])}}}),_.extend(Backbone.Marionette.ItemView.prototype,{enableSVG:function(){if(!Raphael)throw new Error("DEV::ItemView+::enableSVG() You did NOT have Raphael.js included...");var e=this;Raphael(this.el,this.$el.width(),this.$el.height(),function(){e.paper=this,e.trigger("view:paper-ready",this)}),this.onFitPaper=function(){if(!this.paper)return;this.paper.setSize(this.$el.width(),this.$el.height()),this.trigger("view:paper-resized")}}}),_.extend(Backbone.Marionette.ItemView.prototype,{activateEditors:function(t){this._editors=this._editors||{};if(this._editors.attachView)throw new Error("DEV::ItemView+::activateEditors() will need this._editors object, it is now a Region!");var n=t._global||{};_.each(t,function(t,r){if(r.match(/^_./))return;var i,s;_.isFunction(t)?(i=t,t=_.extend({name:r,parentCt:this},n),s=new i(t),s.isCompound=!0):(t=_.extend({name:r,parentCt:this},n,t),t.label||(t.className=t.className||" "),t.type=t.type||"text",i=e.Core.Editor.map.Basic.supported[t.type]&&e.Core.Editor.map.Basic||e.get(t.type,"Editor"),i!==e.Core.Editor.map.Basic&&delete t.type,s=new i(t)),this._editors[r]=s.render();var o=this.$('[editor="'+r+'"]');o.length===0&&t.appendTo&&(o=this.$(t.appendTo)),o.length===0&&(o=this.$el),o.append(s.el),t.value&&s.setVal(t.value)},this),this.listenTo(this,"before:close",function(){_.each(this._editors,function(e){e.close()})}),this.getEditor=function(e){return this._editors[e]},this.getValues=function(){var t={};return _.each(this._editors,function(e,n){var r=e.getVal();r!==undefined&&r!==null&&(t[n]=r)}),e.model(t).toJSON()},this.setValues=function(e,t){if(!e)return;_.each(this._editors,function(n,r){var i=e[r]||selectn(r,e);i!==null&&i!==undefined&&n.setVal(i,t)})},this.validate=function(e){var t={};_.each(this._editors,function(n,r){var i;this.isCompound?i=n.validate():i=n.validate(e),i&&(t[r]=i)},this),this.isCompound&&e&&this.status(t);if(_.size(t)===0)return;return t},this.status=function(e){if(_.isString(e))throw new Error("DEV::ItemView+::activateEditors() You need to pass in messages object instead of "+e);if(!e||_.isEmpty(e)){_.each(this._editors,function(e,t){e.status()});return}_.each(e,function(e,t){this._editors[t]&&this._editors[t].status(e)},this)}}}),_.extend(Backbone.Marionette.ItemView.prototype,{enableTooltips:function(e){this.listenTo(this,"render",function(){this.$('[data-toggle="tooltip"]').tooltip(e)})}}),_.extend(Backbone.Marionette.ItemView.prototype,{enableOverlay:function(){this._overlayConfig=_.isBoolean(this.overlay)?{}:this.overlay,this.overlay=function(e){e=e||{};var t=$(e.anchor||"body"),n=this;return this.listenTo(this,"close",function(){t.overlay()}),t.overlay(_.extend(this._overlayConfig,e,{content:function(){return n.render().el},onShow:function(){n.triggerMethod("show")},onClose:function(){n.close()}})),this}}}),_.extend(Backbone.Marionette.ItemView.prototype,{_renderTplOrResetEditors:function(){this._editors?this.setValues(this.model.toJSON()):(this.render(),this.trigger("view:data-rendered"))},set:function(){this.model||(this.model=e.model());var t=this;this._oneWayBound||(this.listenTo(this.model,"change",function(){t._renderTplOrResetEditors()}),this._oneWayBound=!0);if(arguments.length===1){var n=arguments[0];if(_.isString(n))return this.data=n,this.isInDOM()&&this.refresh();if(_.isArray(n))return this.model.set("items",n)}return this.model.set.apply(this.model,arguments)},get:function(){if(this._editors){if(arguments.length){var e=this.getEditor.apply(this,arguments);if(e)return e.getVal();return}return this.getValues()}if(!this.model){console.warn("DEV::ItemView+::get() You have not yet setup data in view "+this.name);return}return arguments.length?this.model.get.apply(this.model,arguments):this.model.toJSON()},refresh:function(){if(!this.data)return console.warn("DEV::ItemView+::refresh() You must set view.data to use this method.");this.model&&this.model.clear({silent:!0});if(_.isString(this.data)){var t=this;return e.remote(this.data).done(function(e){t.set(e)}).fail(e.ajaxFailed)}return this.model&&this.set(this.model.toJSON())},onRenderData:function(e){this.set(e)}})}(Application),function(e){_.extend(Backbone.Marionette.Layout.prototype,{getViewIn:function(e){return e=this.getRegion(e),e&&e.currentView}});var t=Backbone.Marionette.Layout;Backbone.Marionette.Layout=t.extend({constructor:function(n){n=n||{},this.regions=_.extend({},this.regions,n.regions),this.listenTo(this,"render",function(){var e=this;$(this.el.outerHTML).find("[region]").each(function(t,n){var r=$(n).attr("region");e.regions[r]={selector:'[region="'+r+'"]'}}),this.addRegions(this.regions),_.each(this.regions,function(e,t){this[t].ensureEl(),this[t].$el.addClass("region region-"+_.string.slugify(t)),this[t]._parentLayout=this,this[t]._contentOverflow={},_.each(["overflowX","overflowY","overflow"],function(e){var n=this[t].$el.data(e);n&&(this[t]._contentOverflow[e]=n)},this)},this)}),this.listenTo(this,"render",function(){_.each(this.regions,function(t,n){this[n].listenTo(this[n],"region:load-view",function(t,n){if(!t)return;if(_.string.startsWith(t,"@")){this.show(e.view({template:t},!0));return}var r=e.get(t,_.isPlainObject(n)?"Widget":"View");if(r){this.show(new r(n));return}console.warn("DEV::Layout+::region:load-view View required "+t+" can NOT be found...use app.view({name: ..., ...}).")})},this)}),this.listenTo(this,"show view:data-rendered",function(){_.each(this.regions,function(e,t){this.debug&&this[t].$el.html('<p class="alert alert-info">Region <strong>'+t+"</strong></p>"),this[t].trigger("region:load-view",this[t].$el.attr("view"))},this),this.trigger("view:all-region-shown")});if(n.name||this.name)this.navRegion=n.navRegion||this.navRegion,this.onNavigateChain=function(t){if(!t||t.length===0){this.trigger("view:navigate-to");return}if(!this.navRegion)return this.trigger("view:navigate-to",t.join("/"));if(!this.regions[this.navRegion]){console.warn("DEV::Layout+::onNavigateChain()","invalid navRegion",this.navRegion,"in",this.name||n.name);return}var r=t.shift(),i=e.get(r,"View");if(!i)return t.unshift(r),this.trigger("view:navigate-to",t.join("/"));var s=this.getRegion(this.navRegion);if(!s.currentView||i.prototype.name!==s.currentView.name){var o=new i;s.currentView&&s.currentView.trigger("view:navigate-away"),o.once("show",function(){o.trigger("view:navigate-chain",t)}),s.show(o);return}s.currentView.trigger("view:navigate-chain",t)};return t.prototype.constructor.call(this,n)}})}(Application),function(e){_.extend(Backbone.Marionette.CollectionView.prototype,{onRenderData:function(e){this.set(e),this.trigger("view:data-rendered")},set:function(e,t){if(!_.isArray(e))throw new Error("DEV::CollectionView+::set() You need to have an array passed in as data...");return this.collection||(this.collection=new Backbone.Collection,this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render)),t?this.collection.set(e,t):this.collection.reset(e)},get:function(e){return e?this.collection&&this.collection.get(e):this.collection&&this.collection.toJSON()},onLoadPage:function(t){t=_.extend({page:1,pageSize:15,dataKey:"payload",totalKey:"total",params:{}},this._remote,t),_.each(["params","querys"],function(e){if(!t[e])return;_.extend(t[e],{offset:(t.page-1)*t.pageSize,size:t.pageSize})});var n=this;this._remote=t,e.remote(_.omit(t,"page","pageSize","dataKey","totalKey")).done(function(){n.trigger("view:load-page-done",arguments)}).fail(function(){n.trigger("view:load-page-fail",arguments)}).always(function(){n.trigger("view:load-page-always",arguments)})},onLoadPageDone:function(e){var t=e[0];this.trigger("view:render-data",t[this._remote.dataKey]),this.trigger("view:page-changed",{current:this._remote.page,total:Math.ceil(t[this._remote.totalKey]/this._remote.pageSize)})}})}(Application);var I18N={};(function(e,t){function s(e){function r(e){n.push("## module: "),n.push(e),n.push(" ##"),n.push("\n")}function s(e,t){e=String(e),t=String(t),n.push('"'),n.push(e.replace(/"/g,'\\"')),n.push('"'),n.push("="),n.push(t),n.push("\n")}var n=[];t.each(i,function(n,i){if(e&&!n)return;typeof n=="object"?t.each(n,function(e,t){t!=="_default"&&r(t),s(i,e)}):s(i,n)});var o=n.join("");return o}function o(e){var n=i;return e&&(n=t.reject(i,function(e,t){return e?!0:!1})),JSON.stringify({locale:r,trans:n})}function u(t,n){var r=e(n),i=r.data("i18nKey"),s=r.data("i18nModule");i==="*"&&(i=e.trim(r.html())),r.html(i.i18n({module:s})),r.removeAttr("data-i18n-key")}var n={resourcePath:"static/resource",translationFile:"i18n.json"},r,i;I18N.configure=function(s){t.extend(n,s);var o=app.uri(window.location.toString()).search(!0);return r=I18N.locale=o.locale||n.locale||Detectizr.browser.language,r&&(e.ajax({url:[n.resourcePath,n.translationFile.indexOf("{locale}")>=0?n.translationFile.replace("{locale}",r):[r,n.translationFile].join("/")].join("/"),async:!1,dataType:"json",success:function(e,t,n){if(!e||!e.trans)throw new Error("RUNTIME::i18n::Malformed "+r+" data...");i=e.trans},error:function(e,t,n){throw new Error("RUNTIME::i18n::"+n)}}),i=i||{}),this},String.prototype.i18n=function(t){var n=e.trim(this);if(!r||!n)return n;var s=i[n];if(typeof s=="undefined")return i[n]="",n;if(typeof s=="object"){var o=t&&t.module||"_default";s=s[o];if(typeof s=="undefined")return i[n][o]="",n}return s=String(s),s.trim()===""?n:s},I18N.getResourceProperties=s,I18N.getResourceJSON=o,Handlebars&&Handlebars.registerHelper("i18n",function(e,n,r){return r||(r=n,n=undefined),t.isString(e)?e.i18n(n&&{module:n}):t.isUndefined(e)?"":e}),e.fn.i18n=function(e){return e=t.extend({search:!1},e),e.search?(this.find("[data-i18n-key]").each(u),this):this.filter("[data-i18n-key]").each(u)}})(jQuery,_),function(e){function t(e,t){var n=window.hljs;n&&(n.configure(t&&t.hljs),e.find("pre code").each(function(){n.highlightBlock(this)}))}e.fn.md=function(n){var r=this;return _.isString(n)&&(n={url:n}),n=n||{},n.marked=_.extend({gfm:!0,tables:!0,breaks:!1},n.marked),this.each(function(r,i){var s=e(i),o=s.data(),u=n.url||o.url;e.get(u).done(function(e){var r;r=marked(e,n.marked),_.defer(function(){s.html(r).addClass("md-content"),t(s,n),n.cb&&n.cb(s)})})})}}(jQuery),function(e){function r(n,r){r=_.extend({ignoreRoot:!1,headerHTML:""},r);var i=[],s=e("<div></div>").append(r.headerHTML).append("<ul></ul>");s.$children=s.find("> ul").data("children",[]);var o=s,u=r.ignoreRoot?1:0;n.find((r.ignoreRoot?"":"h1,")+"h2,h3,h4,h5,h6").each(function(){var n=e(this),r=n.context.localName,s=n.html(),a=n.attr("id");i.push(n);var f=e('<li><a href="#" data-id="'+a+'" action="goTo">'+s+"</a><ul></ul></li>");f.data({title:s,id:a});switch(r){case"h2":case"H2":f.addClass("chapter");break;case"h3":case"H3":f.addClass("section");break;default:}f.$children=f.find("> ul").data("children",[]);var l=t[r]-u;if(l>0)f.$parent=o,o.$children.append(f).data("children").push(f),u++;else if(l===0)f.$parent=o.$parent,o.$parent.$children.append(f).data("children").push(f);else{while(l<0)l++,o=o.$parent,u--;f.$parent=o.$parent,o.$parent.$children.append(f).data("children").push(f)}o=f,n.data("toc-node",f)}),n.data("toc",{html:'<div class="md-toc">'+s.html()+"</div>",$headers:i})}var t={};for(var n=1;n<=6;n++)t["h"+n]=t["H"+n]=n;e.fn.toc=function(t){return this.each(function(n,i){var s=e(i);r(s,t)})}}(jQuery),function(e){var t=Handlebars.compile(['<div class="overlay {{class}}" style="position:absolute; top: 0; left: 0; right: 0; bottom: 0; {{#unless class}}z-index:{{zIndex}};background:{{background}};{{/unless}}">','<div class="overlay-outer" style="display: table;table-layout: fixed; height: 100%; width: 100%;">','<div class="overlay-inner" style="display: table-cell;text-align: center;vertical-align: middle; width: 100%;">','<div class="overlay-content-ct" style="display: inline-block;outline: medium none; position:relative;">',"</div>","</div>","</div>","</div>"].join(""));e.fn.overlay=function(n,r){return _.isObject(n)&&(r=n,n=!0),_.isUndefined(n)&&(n=!1),r=r||{},this.each(function(i,s){var o=e(this),u;if(!n){if(!o.data("overlay"))return;u=o.data("overlay"),r=_.extend({},u.data("closeOptions"),r),u.hide({effect:r.closeEffect||r.effect||"clip",complete:function(){r.onClose&&r.onClose(o,u),$window.off("resize",u.data("onResize")),u.remove();var e=o.data("recover-css");o.css({overflowY:e.overflow.y,overflowX:e.overflow.x,position:e.position}),o.removeData("overlay","recover-css")}})}else{if(o.data("overlay"))return;r=_.extend({zIndex:100,background:r.content?"rgba(0, 0, 0, 0.7)":"none",move:!1,resize:!1},r),u=e(t(r)),o.data("recover-css",{overflow:{x:o.css("overflowX"),y:o.css("overflowY")},position:o.css("position")}),o.append(u).css({position:"relative",overflow:"hidden"}),o[0].tagName==="BODY"&&(u.offset({top:$window.scrollTop()}),u.height($window.height()),u.data("onResize",function(){u.height($window.height())}),$window.on("resize",u.data("onResize"))),u.hide(),o.data("overlay",u),$container=u.find(".overlay-content-ct"),r.resize&&$container.resizable({containment:"parent"}),r.move&&$container.draggable({containment:"parent"}),u.data({closeOptions:_.pick(r,"closeEffect","effect","duration","onClose"),container:$container}),u.data("container").html(_.isFunction(r.content)?r.content(o,u):r.content),u.show({effect:r.openEffect||r.effect||"clip",complete:function(){r.onShow&&r.onShow(o,u)}})}})}}(jQuery),function(e){e.fn.hsplit=function(t,n){function l(t,n){var r=n.length,i=e(t).height()-(r-1)*f,s=0;_.each(n,function(e,t){s+=e});var o=[];_.each(n,function(n,r){o[r]=i/s*n/e(t).height()*100}),e(t).css("position")!=="absolute"&&e(t).css("position")!=="relative"&&e(t).css({position:"relative"});var a=0;e(t).children().filter("div").each(function(n,i){var s=e(this),l=f/e(t).height()*100;s.css({position:"absolute",top:a+"%",left:"0",width:"100%",height:o[n]+"%"}),a+=o[n];if(n<r-1){var h='<div class="'+u+'" style="position:absolute;width:100%;left:0;top:'+a+'%;"></div>';s.after(h),s.next().mouseover(function(){e(this).css({cursor:"ns-resize"})}).mousedown(function(){var n=this;e(t).bind("mousemove",function(r){var i=r.pageY-e(this).offset().top,s=e(n).prev().position().top,o=e(n).next().position().top+e(n).next().height();i>s+f&&i<o-f&&(e(n).css({top:i/e(t).height()*100+"%"}),c(n))}).mouseup(function(){e(t).unbind("mousemove")}),e(window).mouseup(function(){e(t).unbind("mousemove")})}),a+=l}})}function c(t){var n=e(t),r=n.prev().height(),i=n.prev().position().top,s=n.next().position().top,o=s+n.next().height(),u=n.position().top,a=n.height(),f=n.parent().height();n.prev().css({height:(u-i)/f*100+"%"}),n.next().css({top:(u+a)/f*100+"%",height:(o-(u+a))/f*100+"%"})}function h(e,t){var n=e.length;e.length=t;for(n;n<t;n++)e[n]=1}var r=e(this),i=this,s=r.children().filter("div").length,o;n=n||{};var u=n.hBarClass||"split-hbar",a='<div class = "'+u+'"></div>';r.before(a);var f=r.prev().height();r.prev().remove();if(!s||s<2)throw new Error("RUNTIME::hsplit:: You need at least two 'sub-div's");if(!t)o=[],_.each(r.children().filter("div"),function(t,n){o[n]=e(t).height()}),l(this,o);else if(_.isArray(t)){if(t.length>s)throw new Error("RUNTIME::hsplit:: Arugment length is greater than the number of 'sub-div's");if(t.length===s)l(this,t);else{if(!(t.length>0))throw new Error("RUNTIME::hsplit:: Arugment length is ZERO!");o=t,h(o,s),l(this,o)}}else if(_.isNumber(t)&&!_.isNaN(t)){if(t<=0)throw new Error("RUNTIME::hsplit:: Single number must be a positive number");o=[],o[0]=t,h(o,s),l(this,o)}else n=t,u=n.vBarClass||"split-vbar",o=[],_.each(r.children().filter("div"),function(t,n){o[n]=e(t).height()}),l(this,o);return this},e.fn.vsplit=function(t,n){function l(t,n){var r=n.length,i=e(t).width()-(r-1)*f,s=0;_.each(n,function(e,t){s+=e});var o=[];_.each(n,function(n,r){o[r]=i/s*n/e(t).width()*100}),e(t).css("position")!=="absolute"&&e(t).css("position")!=="relative"&&e(t).css({position:"relative"});var a=0;e(t).children().filter("div").each(function(n,i){var s=e(this),l=f/e(t).width()*100;s.css({position:"absolute",top:0,left:a+"%",height:"100%",width:o[n]+"%"}),a+=o[n];if(n<r-1){var h='<div class="'+u+'" style="position:absolute;height:100%;top:0;left:'+a+'%;"></div>';s.after(h),s.next().mouseover(function(){e(this).css({cursor:"ew-resize"})}).mousedown(function(){var n=this;e(t).bind("mousemove",function(r){var i=r.pageX-e(this).offset().left,s=e(n).prev().position().left,o=e(n).next().position().left+e(n).next().width();i>s+f&&i<o-f&&(e(n).css({left:i/e(t).width()*100+"%"}),c(n))}).mouseup(function(){e(t).unbind("mousemove")}),e(window).mouseup(function(){e(t).unbind("mousemove")})}),a+=l}})}function c(t){var n=e(t),r=n.prev().width(),i=n.prev().position().left,s=n.next().position().left,o=s+n.next().width(),u=n.position().left,a=n.width(),f=n.parent().width();n.prev().css({width:(u-i)/f*100+"%"}),n.next().css({left:(u+a)/f*100+"%",width:(o-(u+a))/f*100+"%"})}function h(e,t){var n=e.length;e.length=t;for(n;n<t;n++)e[n]=1}var r=e(this),i=this,s=e(this).children().filter("div").length,o;n=n||{};var u=n.vBarClass||"split-vbar",a='<div class="'+u+'"></div>';r.after(a);var f=e(this).next().width();r.next().remove();if(!s||s<2)throw new Error("RUNTIME::vsplit:: You need at least two 'sub-div's");if(!t)o=[],_.each(r.children().filter("div"),function(t,n){o[n]=e(t).width()}),l(this,o);else if(_.isArray(t)){if(t.length>s)throw new Error("RUNTIME::vsplit:: Arugment length is greater than the number of 'sub-div's");if(t.length===s)l(this,t);else{if(!(t.length>0))throw new Error("RUNTIME::vsplit:: Arugment length is ZERO!");o=t,h(o,s),l(this,o)}}else if(_.isNumber(t)&&!_.isNaN(t)){if(t<=0)throw new Error("RUNTIME::vsplit:: Single number must be a positive number");o=[],o[0]=t,h(o,s),l(this,o)}else n=t,u=n.vBarClass||"split-vbar",o=[],_.each(r.children().filter("div"),function(t,n){o[n]=e(t).width()}),l(this,o);return this}}(jQuery),function(e){e.Core.Editor.register("Basic",function(){var t=e.view({template:"#editor-basic-tpl",className:"form-group",type:"ItemView",forceViewType:!0,events:{change:"_triggerEvent","keyup input, textarea":"_triggerEvent",focusout:"_triggerEvent",focusin:"_triggerEvent"},_triggerEvent:function(e){var t=this;t.trigger("editor:"+e.type,this.model.get("name"),this),this.parentCt&&(t=this.parentCt),t.trigger("editor:"+e.type,this.model.get("name"),this)},initialize:function(t){this.parentCt=t.parentCt||this.parentCt;if(t.type in{select:!0,radios:!0,checkboxes:!0}){switch(t.type){case"radios":t.type="radio";break;case"checkboxes":t.type="checkbox";break;default:}t.options=t.options||{},t.options=_.extend({data:[],valueField:"value",labelField:"label"},t.options);var n=t.options,r=function(e){return _.isObject(e[0])?e=_.map(e,function(e){return{value:e[n.valueField],label:e[n.labelField]}}):e=_.map(e,function(e){return{value:e,label:_.string.titleize(e)}}),e},i=function(e){return _.isArray(e.data)||(e.grouped=!0),e.grouped?_.each(e.data,function(t,n){e.data[n]=r(t)}):e.data=r(e.data),e};n.remote?this.listenToOnce(this,"render",function(){var t=this;e.remote(n.remote).done(function(e){t.setChoices(e)})}):i(t.options),this.setChoices=function(e){var t=this.model.get("options");t.data=e,this.model.set("options",i(t)),this.render()}}var s=_.uniqueId("basic-editor-");this.model=new Backbone.Model({uiId:s,layout:t.layout||"",name:t.name,type:t.type,multiple:t.multiple||!1,rows:t.rows||3,fieldname:t.fieldname||s,label:t.label||"",placeholder:t.placeholder||"",help:t.help||"",tooltip:_.isString(t.tooltip)&&t.tooltip||"",options:t.options||undefined,boxLabel:t.boxLabel||"",value:t.value,checked:t.checked||!0,unchecked:t.unchecked||!1}),t.validate&&(this.validators=_.map(t.validate,function(e,t){return _.isFunction(e)?{fn:e}:{rule:t,options:e}}),this.validate=function(n){if(!this.isEnabled())return;var r;if(_.isFunction(t.validate))r=t.validate(this.getVal(),this.parentCt);else{var i=_.clone(this.validators);while(i.length>0){var s=i.shift();s.fn?r=s.fn(this.getVal(),this.parentCt):r=e.Core.Editor.rules[s.rule]&&e.Core.Editor.rules[s.rule](s.options,this.getVal(),this.parentCt);if(!_.isEmpty(r))break}}return n&&this._followup(r),r},this._followup=function(e){_.isEmpty(e)?(this.status(),this.eagerValidation=!1):(this.status(e),this.eagerValidation=!0)},this.listenTo(this,"editor:change editor:keyup",function(){this.eagerValidation&&this.validate(!0)})),t.tooltip&&this.enableTooltips(_.isObject(t.tooltip)?t.tooltip:{});if(t.type==="file"){this.enableActionTags("Editor.File");if(!t.upload||!t.upload.url)throw new Error("DEV::Editor.Basic.File::You need options.upload.url to point to where to upload the file.");this.listenTo(this,"editor:change",function(){this.ui.input.val()?(t.upload.standalone&&this.ui.upload.removeClass("hidden").show(),this.ui.clearfile.removeClass("hidden").show()):(this.ui.upload.hide(),this.ui.clearfile.hide())}),this.onRender=function(){this.$el.fileupload({fileInput:null}),t.upload.callbacks&&_.each(t.upload.callbacks,function(e,t){this.$el.bind("fileupload"+t,_.bind(e,this))},this)},_.extend(this.actions,{clear:function(){this.setVal("",!0)},upload:function(){var e=this;this.upload(_.extend({success:function(t){e.ui.result.html(_.isString(t)?t.i18n():JSON.stringify(t)),_.delay(function(){e.ui.result.empty()},6e3)}},t.upload))}}),this.upload=function(n){n=_.extend({},t.upload,n),n.formData&&(n.formData=_.result(n,"formData")),e.config.baseAjaxURI&&(n.url=[e.config.baseAjaxURI,n.url].join("/")),this.$el.fileupload("send",_.extend({timeout:e.config.timeout*2,fileInput:this.ui.input},n))}}},isEnabled:function(){return!this._inactive},disable:function(e){e===!1?this._inactive=!1:this._inactive=!0;if(_.isUndefined(e)){this.ui.input&&this.ui.input.prop("disabled",!0);return}e?this.$el.hide():(this.ui.input&&this.ui.input.prop("disabled",!1),this.$el.show())},setVal:function(e,t){this.ui.inputs?this.ui.inputs.find("input").val(_.isArray(e)?e:[e]):this.ui["input-ro"]?(e=_.escape(e),this.ui["input-ro"].data("value",e).html(e)):(this.model.get("type")==="checkbox"&&this.ui.input.prop("checked",e===this.model.get("checked")),this.ui.input.val(e)),t&&this._triggerEvent({type:"change"})},getVal:function(){if(!this.isEnabled())return;if(this.ui.inputs){var e=this.$("input:checked").map(function(e,t){return $(this).val()}).get();return this.model.get("type")==="radio"&&(e=e.pop()),e}if(this.model.get("type")==="checkbox")return this.ui.input.prop("checked")?this.model.get("checked")||!0:this.model.get("unchecked")||!1;if(this.ui.input)return this.ui.input.val()},validate:$.noop,status:function(e){if(e){var t="error",n=e;_.isString(e)||(t=e.type||t,n=e.msg||t);var r="has-"+t;this.$el.removeClass(this.$el.data("type-class")).addClass(r).data("type-class",r),this.ui.msg.html(n.i18n())}else this.$el.removeClass(this.$el.data("type-class")).removeData("type-class"),this.ui.msg.empty()}});return t.supported={ro:!0,text:!0,textarea:!0,select:!0,file:!0,checkboxes:!0,checkbox:!0,radios:!0,hidden:!0,password:!0,number:Modernizr.inputtypes.number,range:Modernizr.inputtypes.range,email:Modernizr.inputtypes.email,tel:Modernizr.inputtypes.tel,search:Modernizr.inputtypes.search,url:Modernizr.inputtypes.url,color:Modernizr.inputtypes.color,time:Modernizr.inputtypes.time,date:Modernizr.inputtypes.date,datetime:Modernizr.inputtypes.datetime,"datetime-local":Modernizr.inputtypes["datetime-local"],month:Modernizr.inputtypes.month,week:Modernizr.inputtypes.week},t}),e.Util.Tpl.build("editor-basic-tpl",["{{#if label}}",'<label class="control-label {{#if layout}}{{layout.label}}{{/if}}" for="{{uiId}}">{{i18n label}}</label>',"{{/if}}",'<div class="{{#if layout}}{{layout.field}}{{/if}}" data-toggle="tooltip" title="{{i18n tooltip}}">','{{#is type "select"}}','<select ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" class="form-control" id="{{uiId}}" {{#if multiple}}multiple="multiple"{{/if}} style="margin-bottom:0">',"{{#if options.grouped}}","{{#each options.data}}",'<optgroup label="{{i18n @key}}">',"{{#each this}}",'<option value="{{value}}">{{i18n label}}</option>',"{{/each}}","</optgroup>","{{/each}}","{{else}}","{{#each options.data}}",'<option value="{{value}}">{{i18n label}}</option>',"{{/each}}","{{/if}}","</select>","{{else}}",'{{#is type "textarea"}}','<textarea ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" class="form-control" id="{{uiId}}" rows="{{rows}}" placeholder="{{i18n placeholder}}" style="margin-bottom:0"></textarea>',"{{else}}","{{#if options}}",'<div ui="inputs" id={{uiId}}>',"{{#each options.data}}",'{{#unless ../options.inline}}<div class="{{../../type}}">{{/unless}}','<label class="{{#if ../options.inline}}{{../../type}}-inline{{/if}}">','<input ui="input" name="{{#if ../fieldname}}{{../../fieldname}}{{else}}{{../../name}}{{/if}}{{#is ../type "checkbox"}}[]{{/is}}" type="{{../type}}" value={{value}}> {{i18n label}}',"</label>","{{#unless ../options.inline}}</div>{{/unless}}","{{/each}}","</div>","{{else}}",'<div class="{{type}}">','{{#is type "checkbox"}}',"<label>",'<input ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" type="checkbox" value="{{value}}"> {{i18n boxLabel}}',"</label>","{{else}}",'{{#is type "ro"}}','<div ui="input-ro" data-value="{{{value}}}" class="form-control-static">{{value}}</div>',"{{else}}",'<input ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" {{#isnt type "file"}}class="form-control"{{else}} style="display:inline;" {{/isnt}} type="{{type}}" id="{{uiId}}" placeholder="{{i18n placeholder}}" value="{{value}}"> <!--1 space-->','{{#is type "file"}}','<span action="upload" class="hidden file-upload-action-trigger" ui="upload" style="cursor:pointer;"><i class="glyphicon glyphicon-upload"></i> <!--1 space--></span>','<span action="clear" class="hidden file-upload-action-trigger" ui="clearfile"  style="cursor:pointer;"><i class="glyphicon glyphicon-remove-circle"></i></span>','<span ui="result" class="file-upload-result wrapper-horizontal"></span>',"{{/is}}","{{/is}}","{{/is}}","</div>","{{/if}}","{{/is}}","{{/is}}",'{{#if help}}<span class="help-block editor-help-text" style="margin-bottom:0"><small>{{i18n help}}</small></span>{{/if}}','<span class="help-block editor-status-text input-error" ui="msg">{{i18n msg}}</span>',"</div>"])}(Application),function(e){e.Core.Editor.rules={required:function(e,t,n){if(!t)return _.isObject(e)&&e.msg||"This field is required"}},e.Core.Editor.addRule=function(t,n){if(!t||!_.isFunction(n))throw new Error("DEV::Editor::Basic validation rule must have a name and a function implementation.");e.Core.Editor.rules[t]&&console.warn("DEV::Editor::Basic validation rule name ["+t+"] is already defined."),e.Core.Editor.rules[t]=n}}(Application),function(e){e.widget("Datagrid",function(){var t=e.view({tagName:"table",template:['<thead region="header"></thead>','<tbody region="body"></tbody>'],initialize:function(e){this._options=_.extend({data:[],details:!1,columns:[]},e)},onShow:function(){this.header.show(new n),this.body.show(new i({el:this.body.$el})),this.trigger("view:reconfigure",this._options)},onReconfigure:function(e){e=e||{},this._options=_.extend(this._options,e),_.each(this._options.columns,function(e){e.header=e.header||"string",e.cell=e.cell||e.header||"string",e.label=e.label||_.string.titleize(e.name)}),this.header.currentView.set(this._options.columns),this.body.currentView._options=this._options,this.body.currentView.set(this._options.data),this.trigger("view:data-rendered")},set:function(e){this.trigger("view:reconfigure",{data:e})},get:function(){return this.getBody().get()},getBody:function(){return this.body.currentView},getHeader:function(){return this.header.currentView}}),n=e.view({type:"CollectionView",forceViewType:!0,itemView:"dynamic",itemViewEventPrefix:"headercell",tagName:"tr",initialize:function(e){this.grid=this.parentCt||e&&e.grid},buildItemView:function(t,n,r){return e.widget(_.string.classify([t.get("header"),"header","cell"].join("-")),{model:t,tagName:"th",row:this})}}),r=e.view({type:"CollectionView",forceViewType:!0,itemView:"dynamic",itemViewEventPrefix:"cell",tagName:"tr",triggers:{click:{event:"clicked",preventDefault:!1},dblclick:{event:"dblclicked",preventDefault:!1}},initialize:function(e){this.grid=e.body.parentCt},buildItemView:function(t,n,r){return e.widget(_.string.classify([t.get("cell"),"cell"].join("-")),{tagName:"td",model:t,row:this})}}),i=e.view({type:"CollectionView",forceViewType:!0,itemView:r,itemViewEventPrefix:"row",itemViewOptions:function(t,n){return{collection:e.collection(_.map(this._options.columns,function(r){return _.extend({value:e.extract(r.name||"",t.attributes),index:n},r)},this)),body:this}},itemEvents:{clicked:function(e,t){t.grid.trigger("row:clicked",t)},dblclicked:function(e,t){t.grid.trigger("row:dblclicked",t)}}});return t})}(Application),function(e){e.widget("StringHeaderCell",function(){var t=e.view({template:'<span><i class="{{icon}}"></i> {{{i18n label}}}</span>'});return t})}(Application),function(e){e.widget("StringCell",function(){var t=e.view({template:"<span>{{{value}}}</span>"});return t})}(Application),function(e){e.widget("SeqCell",function(){var t=e.view({template:"{{index}}"});return t})}(Application),function(e){e.widget("ActionCell",function(){var t=e.view({template:["{{#each actions}}",'<span class="action-cell-item" action="{{@key}}" data-toggle="tooltip" title="{{i18n tooltip}}"><i class="{{icon}}"></i> {{i18n label}}</span> ',"{{/each}}"],className:"action-cell",initialize:function(e){this.row=e.row;var t=this.model.get("actions")||{};_.each({preview:{icon:"fa fa-eye",tooltip:"Preview"},edit:{icon:"fa fa-pencil",tooltip:"Edit"},"delete":{icon:"fa fa-times",tooltip:"Delete"}},function(e,n){t[n]&&(t[n]=_.extend(e,t[n]))}),this.actions=this.actions||{},_.each(t,function(e,t){e.fn&&(this.actions[t]=function(t){e.fn.apply(this.row,arguments)})},this),this.model.set("actions",t),this.enableActionTags(!0)},tooltips:!0});return t})}(Application),function(e){e.widget("Tree",function(){var t={type:"CompositeView",forceViewType:!0,tagName:"li",itemViewContainer:"ul",itemViewOptions:function(){return{parent:this}},className:function(){return _.size(this.model.get("children"))>=1?"node":"leaf"},initialize:function(t){this.parent=t.parent,this.className()==="node"&&(this.collection=e.collection(this.model.get("children"))),this.listenTo(this,"render",function(){this.$el.addClass("clickable").data({view:this,$children:this.$el.find("> ul"),$parent:this.parent&&this.parent.$el})})},template:['<a class="item" href="#"><i class="type-indicator"></i> <i class="{{icon}}"></i> {{{i18n val}}}</a>','<ul class="children hidden"></ul>']},n=e.view({type:"CollectionView",forceViewType:!0,className:"tree tree-root",tagName:"ul",initialize:function(n){this._options=n,this.itemView=this._options.itemView||e.view(_.extend({},t,_.omit(this._options.node,"type","tagName","itemViewContainer","itemViewOptions","className","initialize"))),this.onSelected=n.onSelected||this.onSelected},onShow:function(){this.trigger("view:reconfigure",this._options)},onReconfigure:function(e){_.extend(this._options,e),this.trigger("view:render-data",this._options.data)},events:{"click .clickable":function(e){e.stopPropagation();var t=$(e.currentTarget),n=t.data();t.hasClass("node")&&this.trigger("view:toggleChildren",n),this.trigger("view:selected",t.data(),t,e)}},onToggleChildren:function(e){e.$children.toggleClass("hidden"),e.view.$el.toggleClass("expanded")},onSelected:function(e,t,n){}});return n})}(Application),function(e){e.widget("Paginator",function(){var t=e.view({className:"pagination",tagName:"ul",template:['<li {{#if atFirstPage}}class="disabled"{{/if}}><a href="#" action="goToFirstPage" data-page="--">'+_.escape("<<")+"</a></li>",'<li {{#if atFirstWindow}}class="hidden"{{/if}}><a href="#" action="goToAdjacentWindow" data-window="-">...</a></li>',"{{#each pages}}",'<li {{#if isCurrent}}class="active"{{/if}}><a href="#" action="goToPage" data-page="{{number}}">{{number}} <span class="sr-only">(current)</span></a></li>',"{{/each}}",'<li {{#if atLastWindow}}class="hidden"{{/if}}><a href="#" action="goToAdjacentWindow" data-window="+">...</a></li>','<li {{#if atLastPage}}class="disabled"{{/if}}><a href="#" action="goToLastPage" data-page="++">'+_.escape(">>")+"</a></li>"],initialize:function(e){this._options=_.extend({pageWindowSize:5},e),e.target&&this.listenTo(e.target,"view:page-changed",function(e){this.trigger("view:reconfigure",{currentPage:e.current,totalPages:e.total})})},onShow:function(){},onReconfigure:function(e){_.extend(this._options,e),this._options.currentWindow=Math.ceil(this._options.currentPage/this._options.pageWindowSize);var t={atFirstPage:this._options.currentPage===1,atLastPage:this._options.currentPage===this._options.totalPages,atFirstWindow:this._options.currentWindow===1,atLastWindow:this._options.currentWindow===Math.ceil(this._options.totalPages/this._options.pageWindowSize),pages:_.reduce(_.range(1,this._options.totalPages+1),function(e,t){return t>(this._options.currentWindow-1)*this._options.pageWindowSize&&t<=this._options.currentWindow*this._options.pageWindowSize&&e.push({number:t,isCurrent:t===this._options.currentPage}),e},[],this)};this.trigger("view:render-data",t)},actions:{goToPage:function(e,t){t.preventDefault();var n=e.data("page");if(n===this._options.currentPage)return;this.trigger("view:change-page",n)},goToFirstPage:function(e,t){t.preventDefault(),this.trigger("view:change-page",1)},goToLastPage:function(e,t){t.preventDefault(),this.trigger("view:change-page",this._options.totalPages)},goToAdjacentWindow:function(e,t){t.preventDefault();var n=this._options.currentWindow,r=e.data("window");r==="+"?n++:n--;if(n<1||n>Math.ceil(this._options.totalPages/this._options.pageWindowSize))return;this.trigger("view:change-page",n==1?1:(n-1)*this._options.pageWindowSize+1)}},onChangePage:function(e){if(this._options.onChangePage)return this._options.onChangePage.call(this,e);this._options.target&&this._options.target.trigger("view:load-page",{page:e})}});return t})}(Application),app.stagejs="1.8.5-913 build 1447817688588";